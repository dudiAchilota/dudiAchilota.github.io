<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>! </title>
  <style>
    :root {
      --bg1: #1b0e2a;
      --bg2: #0d1b2a;
      --accent: #ff9bd2;
      --accent2: #7dd3fc;
      --text: #f5f7fb;
    }

    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      color: var(--text);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 18px;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 100%;
      max-width: 1000px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
      background: rgba(0, 0, 0, 0.4);
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin: 0 0 10px;
    }

    button {
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      border: none;
      padding: 8px 16px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: 700;
      color: #101010;
      margin-bottom: 16px;
    }

    .display {
      min-height: 160px;
      padding: 16px;
      background: rgba(0, 0, 0, 0.35);
      border-radius: 12px;
      font-size: 1.2rem;
      line-height: 1.7;
      white-space: pre-wrap;
      text-align: right;
    }

    .caret {
      display: inline-block;
      width: 2px;
      height: 1.1em;
      background: var(--text);
      margin-inline-start: 6px;
      animation: blink 1s steps(2, start) infinite;
    }

    @keyframes blink {
      50% {
        opacity: 0
      }
    }

    canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 0;
    }

    .content {
      position: relative;
      z-index: 2;
    }

    /*  */
    .balloon {
      position: absolute;
      bottom: -150px;
      width: 40px;
      height: 60px;
      border-radius: 50% 50% 45% 45%;
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.7), transparent 40%), var(--clr);
      animation: floatUp linear infinite;
      z-index: 1;
    }

    .balloon::after {
      content: "";
      position: absolute;
      bottom: -20px;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 20px;
      background: #fff;
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) scale(1);
      }

      to {
        transform: translateY(-120vh) scale(1.05);
      }
    }

    /* 拽驻 */
    .confetti {
      position: absolute;
      width: 8px;
      height: 14px;
      background: var(--clr);
      top: -20px;
      animation: fall linear forwards;
      z-index: 1;
    }

    @keyframes fall {
      to {
        transform: translateY(110vh) rotate(360deg);
      }
    }
  </style>
</head>

<body>
  <!-- 驻转专 转 抓 -container -->
  <button id="startBtn">转</button>

  <div class="container">
    <canvas id="fw"></canvas>
    <div class="content">
      <!-- 转 转专转 -->
      <h1>砖 专</h1>
      <div id="display" class="display" aria-live="polite"></div>
    </div>
  </div>

  <script>
const MESSAGE = `  转 !
专 ' 砖指 转  专,  专爪 砖转  转专, 驻 注砖 .
砖转砖专 专 转, 转专  专 转 .
 专爪 砖   拽专 砖 砖, 专 砖注  砖驻转,
爪  转 专 砖 注 转 转.
转 ' 砖转 专转  砖 砖 专, 专 转 注 专 转专 爪转.
  砖注  爪转! 
转  专注  转 专转 转  转驻转 转  专, 砖 砖专.
砖转 转  砖.
   
砖驻转 `;
    // Typewriter
    (function () {
      const display = document.getElementById('display');
      const startBtn = document.getElementById('startBtn');
      const caret = document.createElement('span');
      caret.className = 'caret';

      const cpsDefault = 10;
      let timer = null, idx = 0, running = false;

      function render(text) { display.innerText = text; display.appendChild(caret); }
      render("");

      function start() {
        if (running) return;
        running = true; idx = 0; render("");
        const ms = 1000 / cpsDefault;
        timer = setInterval(() => {
          idx++;
          render(MESSAGE.slice(0, idx));
          if (idx >= MESSAGE.length) { clearInterval(timer); running = false; }
        }, ms);
      }
      startBtn.addEventListener('click', start);
    })();

    // Fireworks
    (function () {
      const canvas = document.getElementById('fw');
      const ctx = canvas.getContext('2d');
      let w, h, dpr = Math.min(window.devicePixelRatio || 1, 2);
      function resize() {
        const rect = canvas.getBoundingClientRect();
        w = Math.floor(rect.width); h = Math.floor(rect.height);
        canvas.width = w * dpr; canvas.height = h * dpr; ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      new ResizeObserver(resize).observe(canvas);

      const colors = ['#ff6384', '#ffcd56', '#4bc0c0', '#36a2eb', '#9966ff', '#ff9f40'];
      const gravity = 0.08, friction = 0.985; const sparks = [];

      function burst(x, y) {
        const count = 80 + Math.random() * 40;
        for (let i = 0; i < count; i++) {
          const angle = Math.random() * Math.PI * 2;
          const speed = 2 + Math.random() * 3;
          sparks.push({ x, y, vx: Math.cos(angle) * speed, vy: Math.sin(angle) * speed, life: 60 + Math.random() * 40, age: 0, size: 1 + Math.random() * 2, color: colors[Math.floor(Math.random() * colors.length)] });
        }
      }

      function animate() {
        ctx.clearRect(0, 0, w, h);
        for (let i = sparks.length - 1; i >= 0; i--) {
          const p = sparks[i];
          p.vx *= friction; p.vy = p.vy * friction + gravity; p.x += p.vx; p.y += p.vy; p.age++;
          const alpha = 1 - p.age / p.life; ctx.globalAlpha = alpha;
          ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fillStyle = p.color; ctx.fill();
          if (p.age > p.life) sparks.splice(i, 1);
        }
        ctx.globalAlpha = 1; requestAnimationFrame(animate);
      }
      animate();

      function randomBurst() { burst(Math.random() * w, Math.random() * h * 0.5 + 50); }
      setInterval(randomBurst, 4000);
    })();

    // Balloons
    (function () {
      const colors = ['#ff6384', '#36a2eb', '#ffcd56', '#4bc0c0', '#9966ff', '#ff9f40'];
      function createBalloon() {
        const b = document.createElement('div');
        b.className = 'balloon';
        b.style.left = Math.random() * 100 + "%";
        b.style.setProperty('--clr', colors[Math.floor(Math.random() * colors.length)]);
        b.style.animationDuration = 10 + Math.random() * 10 + 's';
        document.body.appendChild(b);
        setTimeout(() => b.remove(), 20000);
      }
      setInterval(createBalloon, 3000);
    })();

    // Confetti
    (function () {
      const colors = ['#ff6384', '#36a2eb', '#ffcd56', '#4bc0c0', '#9966ff', '#ff9f40'];
      function createConfetti() {
        const c = document.createElement('div');
        c.className = 'confetti';
        c.style.left = Math.random() * 100 + "%";
        c.style.setProperty('--clr', colors[Math.floor(Math.random() * colors.length)]);
        c.style.animationDuration = 4 + Math.random() * 3 + 's';
        document.body.appendChild(c);
        setTimeout(() => c.remove(), 8000);
      }
      setInterval(createConfetti, 400);
    })();
  </script>
</body>
</html>
